{% extends "base.html" %}

{% block title %}Panel de Administración{% endblock %}

{% block styles %}
{{ super() }}
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
{% endblock %}

{% block content %}
<div class="container dashboard-container">
    <div class="dashboard-header animate-fade-in">
        <h1>Panel de Administración</h1>
        <p>Bienvenido al sistema de gestión de calificaciones. Desde aquí podrá generar reportes de las calificaciones de un estudiante o de un grado en formato EXCEL y PDF con sólo presionar un botón.</p>
        
        {% if stats %}
        <div class="dashboard-stats">
            <div class="stat-card">
                <h3>{{ stats.students }}</h3>
                <p>Estudiantes</p>
            </div>
            <div class="stat-card">
                <h3>{{ stats.teachers }}</h3>
                <p>Profesores</p>
            </div>
            <div class="stat-card">
                <h3>{{ stats.subjects }}</h3>
                <p>Asignaturas</p>
            </div>
            <div class="stat-card">
                <h3>{{ stats.grades }}</h3>
                <p>Grados</p>
            </div>
        </div>
        {% endif %}
        
        {% if active_year %}
        <div class="mt-3">
            <span class="badge bg-success p-2">Año Académico Activo: {{ active_year.name }}</span>
        </div>
        {% endif %}
    </div>

    <div class="row">
        <div class="col-md-4 mb-4 animate-fade-in delay-1">
            <div class="dashboard-card">
                <div class="card-body">
                    <i class="fas fa-users card-icon"></i>
                    <h5 class="card-title">Usuarios</h5>
                    <p class="card-text">Administra usuarios del sistema, incluyendo profesores y administradores.</p>
                    <a href="{{ url_for('admin.users') }}" class="btn btn-dashboard btn-primary">Gestionar Usuarios</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4 animate-fade-in delay-2">
            <div class="dashboard-card">
                <div class="card-body">
                    <i class="fas fa-calendar-alt card-icon"></i>
                    <h5 class="card-title">Años Académicos</h5>
                    <p class="card-text">Configura años académicos y períodos escolares.</p>
                    <a href="{{ url_for('admin.academic_years') }}" class="btn btn-dashboard btn-primary">Gestionar Años Académicos</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4 animate-fade-in delay-3">
            <div class="dashboard-card">
                <div class="card-body">
                    <i class="fas fa-graduation-cap card-icon"></i>
                    <h5 class="card-title">Grados y Secciones</h5>
                    <p class="card-text">Administra grados escolares y sus secciones.</p>
                    <a href="{{ url_for('admin.grades') }}" class="btn btn-dashboard btn-primary">Gestionar Grados</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4 animate-fade-in delay-4">
            <div class="dashboard-card">
                <div class="card-body">
                    <i class="fas fa-book card-icon"></i>
                    <h5 class="card-title">Asignaturas</h5>
                    <p class="card-text">Gestiona las asignaturas impartidas en la institución.</p>
                    <a href="{{ url_for('admin.subjects') }}" class="btn btn-dashboard btn-primary">Gestionar Asignaturas</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4 animate-fade-in delay-5">
            <div class="dashboard-card">
                <div class="card-body">
                    <i class="fas fa-user-graduate card-icon"></i>
                    <h5 class="card-title">Estudiantes</h5>
                    <p class="card-text">Administra el registro de estudiantes por sección.</p>
                    <a href="{{ url_for('admin.students') }}" class="btn btn-dashboard btn-primary">Gestionar Estudiantes</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4 animate-fade-in delay-6">
            <div class="dashboard-card">
                <div class="card-body">
                    <i class="fas fa-chalkboard-teacher card-icon"></i>
                    <h5 class="card-title">Asignaciones</h5>
                    <p class="card-text">Asigna profesores a asignaturas y secciones.</p>
                    <a href="{{ url_for('admin.assignments') }}" class="btn btn-dashboard btn-primary">Gestionar Asignaciones</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4 animate-fade-in delay-7">
            <div class="dashboard-card">
                <div class="card-body">
                    <i class="fas fa-tasks card-icon"></i>
                    <h5 class="card-title">Evaluaciones</h5>
                    <p class="card-text">Administra las evaluaciones de estudiantes.</p>
                    <a href="{{ url_for('admin.evaluations') }}" class="btn btn-dashboard btn-primary">Gestionar Evaluaciones</a>
                </div>
            </div>
        </div>
        
        <div class="col-md-4 mb-4 animate-fade-in delay-8">
            <div class="dashboard-card">
                <div class="card-body">
                    <i class="fas fa-chart-bar card-icon"></i>
                    <h5 class="card-title">Reportes</h5>
                    <p class="card-text">Genera reportes de calificaciones por sección o estudiante.</p>
                    <a href="{{ url_for('reports.index') }}" class="btn btn-dashboard btn-primary">Ver Reportes</a>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4 animate-fade-in delay-9">
            <div class="dashboard-card">
                <div class="card-body">
                    <i class="fas fa-file-excel card-icon"></i>
                    <h5 class="card-title">Plantillas Excel</h5>
                    <p class="card-text">Gestiona plantillas personalizadas para reportes.</p>
                    <a href="{{ url_for('templates.index') }}" class="btn btn-dashboard btn-primary">Gestionar Plantillas</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    // Asegúrate de que Font Awesome esté incluido en tu base.html
    // Si no lo está, puedes agregarlo aquí:
    // document.head.innerHTML += '<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">';
    
    // Script para animaciones suaves al hacer scroll
    document.addEventListener('DOMContentLoaded', function() {
        // Función para verificar si un elemento está en el viewport
        function isInViewport(element) {
            const rect = element.getBoundingClientRect();
            return (
                rect.top >= 0 &&
                rect.left >= 0 &&
                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                rect.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        }
        
        // Aplicar animaciones cuando los elementos entran en el viewport
        function checkVisibility() {
            document.querySelectorAll('.animate-fade-in').forEach(function(element) {
                if (isInViewport(element)) {
                    element.style.animationPlayState = 'running';
                }
            });
        }
        
        // Verificar visibilidad al cargar y al hacer scroll
        checkVisibility();
        window.addEventListener('scroll', checkVisibility);
        
        // Agregar efecto hover a las tarjetas
        document.querySelectorAll('.dashboard-card').forEach(function(card) {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-10px)';
                this.style.boxShadow = '0 15px 30px rgba(0, 0, 0, 0.15)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.boxShadow = '0 10px 25px rgba(0, 0, 0, 0.1)';
            });
        });

        function generateQuickReport() {
        // Mostrar modal para selección rápida de reporte
        if (confirm('¿Generar reporte del período actual?')) {
            window.location.href = '{{ url_for("reports.index") }}';
        }
    }
    });
</script>
{% endblock %}

